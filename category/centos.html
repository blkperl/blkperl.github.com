<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>puppet resource blog author=blkperl - centos</title>
        <link rel="stylesheet" href="http://blkperl.github.com/theme/css/main.css" />
        <link href="http://blkperl.github.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="puppet resource blog author=blkperl Atom Feed" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="http://blkperl.github.com/">puppet resource blog author=blkperl </a></h1>
                <nav><ul>
                    <li class="active"><a href="http://blkperl.github.com/category/centos.html">centos</a></li>
                    <li><a href="http://blkperl.github.com/category/ganeti.html">ganeti</a></li>
                    <li><a href="http://blkperl.github.com/category/lxc.html">lxc</a></li>
                    <li><a href="http://blkperl.github.com/category/puppet.html">puppet</a></li>
                    <li><a href="http://blkperl.github.com/category/solaris.html">solaris</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="http://blkperl.github.com/centos_sunray.html">Installing Sunray Software Server (SRSS) on Centos 5.x</a></h1>
<footer class="post-info">
        <abbr class="published" title="2013-05-18T21:35:00-07:00">
                Published: Sat 18 May 2013
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="http://blkperl.github.com/author/william-van-hevelingen.html">William Van Hevelingen</a>
        </address>
<p>In <a href="http://blkperl.github.com/category/centos.html">centos</a>. </p>
<p>tags: <a href="http://blkperl.github.com/tag/centos.html">centos</a> <a href="http://blkperl.github.com/tag/sunray.html">sunray</a> <a href="http://blkperl.github.com/tag/oracle.html">oracle</a> <a href="http://blkperl.github.com/tag/rhel.html">rhel</a> <a href="http://blkperl.github.com/tag/redhat.html">redhat</a> </p>
</footer><!-- /.post-info --><p>These are the steps I took to get the SunRay software working on Centos. I was able to get this working thanks to scraps of information from <a href="http://blog.parahard.com/2009/06/installing-sunray-ii- erver-software-on.html">Peter Senna Tschudin's blog</a> In addition to get it working on 32bit like in Peter's blog, I also got it working on 64 bit. These are the instructions for 64bit.</p>
<p>The SunRays we have are the SunRay 2 model updated with the latest firmware.</p>
<h2>Download the software from Oracle's support portal (requires login)</h2>
<div class="highlight"><pre><span class="nb">cd</span> /opt/
<span class="c"># download files from Oracle&#39;s website</span>
unzip V37034-01.zip
unzip p16406547_111_Generic.zip
</pre></div>


<h2>Install the dependencies</h2>
<div class="highlight"><pre>yum install glib dhcp openldap-clients tftp-server libXp libXfont.i386 openmotif22 openssl compat-libstdc++-33 libusb-devel compat-openldap kernel-devel gdbm.i386 gcc openmotif.i386 sssd-client.i386
</pre></div>


<p>If you are not using sssd you will need to install the nscd.i386 package.</p>
<h2>Install the firmware</h2>
<div class="highlight"><pre><span class="nb">cd</span> /opt/sros_11.1.1.0/
./utfwinstall 
Installing Sun Ray Operating Software 11.1.1.0

Sun Ray Operating Software 11.1.1.0 has been successfully installed.

This output has been logged to

    /var/log/utfwinstall.2013_05_09_14:48:54.log

+++ Done.
</pre></div>


<h2>Install the bundled JRE and Apache Tomcat</h2>
<div class="highlight"><pre><span class="nb">cd</span> /opt/srs_5.4.0.0-Linux.i386/Supplemental/Java_Runtime_Environment/Linux
sh jre-6u41-linux-i586.bin 
mv jre1.6.0_41/ /opt/
<span class="nb">cd</span> /opt/srs_5.4.0.0-Linux.i386/Supplemental/Apache_Tomcat
gunzip apache-tomcat-5.5.36.tar.gz
tar xvf apache-tomcat-5.5.36.tar 
mv apache-tomcat-5.5.36 /opt/
ln -s /opt/apache-tomcat-5.5.36/ /opt/apache-tomcat
</pre></div>


<h2>Install the Sunray Server Software</h2>
<div class="highlight"><pre><span class="nb">cd</span> /opt/srs_5.4.0.0-Linux.i386
./utsetup

<span class="o">[</span>...<span class="o">]</span>
Accept? <span class="o">(</span>Y/N<span class="o">)</span> y
<span class="o">[</span>...<span class="o">]</span>
Enter Java v1.6 <span class="o">(</span>or later<span class="o">)</span> location: <span class="o">[</span>/usr/java<span class="o">]</span> /opt/jre1.6.0_41/
<span class="o">[</span>...<span class="o">]</span>
Continue? <span class="o">(</span>Y/N<span class="o">)</span> <span class="o">[</span>Y<span class="o">]</span> y

Enter new UT admin password:  
Again: Enter new UT admin password:  
Configure Sun Ray Web Administration? <span class="o">(</span>Y/N<span class="o">)</span> <span class="o">[</span>N<span class="o">]</span> y

Enter Apache Tomcat installation directory <span class="o">[</span>/opt/apache-tomcat<span class="o">]</span>

Enter HTTP port number <span class="o">[</span>1660<span class="o">]</span> 8080

Enable secure connections? <span class="o">(</span>Y/N<span class="o">)</span> <span class="o">[</span>Y<span class="o">]</span> y

Enter HTTPS port number <span class="o">[</span>1661<span class="o">]</span> 8081

Enter Tomcat process username <span class="o">[</span>utwww<span class="o">]</span>

Enable remote server administration? <span class="o">(</span>Y/N<span class="o">)</span> <span class="o">[</span>N<span class="o">]</span> Y

Configure Sun Ray Kiosk Mode? <span class="o">(</span>Y/N<span class="o">)</span> <span class="o">[</span>N<span class="o">]</span> N

Configure this server <span class="k">for</span> a failover group? <span class="o">(</span>Y/N<span class="o">)</span> <span class="o">[</span>N<span class="o">]</span>

About to configure the following software products:

Sun Ray Data Store 3.5
    Hostname: mysunrayserver.example.org
    Sun Ray root entry: <span class="nv">o</span><span class="o">=</span>utdata
    Sun Ray root name: utdata
    Sun Ray utdata admin password: <span class="o">(</span>not shown<span class="o">)</span>
    SRDS <span class="s1">&#39;rootdn&#39;</span>: <span class="nv">cn</span><span class="o">=</span>admin,o<span class="o">=</span>utdata

Sun Ray Web Administration hosted at Apache Tomcat/5.5.36
    Apache Tomcat installation directory: /opt/apache-tomcat
    HTTP port number: 8080
    HTTPS port number: 8081
    Tomcat process username: utwww
    Remote server administration: Enabled

Sun Ray Server Software 4.5
    Failover group: no
    Sun Ray Kiosk Mode: no
Continue? <span class="o">(</span>Y/N<span class="o">)</span> <span class="o">[</span>Y<span class="o">]</span>

Enter groupname <span class="k">for</span> Windows Connector <span class="o">[</span>utwc<span class="o">]</span>

Enter group ID <span class="o">(</span>gid<span class="o">)</span> <span class="k">for</span> the group <span class="o">[</span>auto<span class="o">]</span>

Do you want to configure Firmware downloads <span class="k">for</span> Sun Ray clients? <span class="o">(</span>Y/N<span class="o">)</span> <span class="o">[</span>Y<span class="o">]</span>
</pre></div>


<h2>Reboot</h2>
<p>Seriously you should reboot</p>
<h2>If the services are not running on reboot</h2>
<p>You can manually start them with:</p>
<div class="highlight"><pre>/opt/SUNWut/sbin/utadm -L on
/opt/SUNWut/sbin/utstart
</pre></div>


<h2>SunRay Web Administration</h2>
<p>Log into <a href="https://mysunrayserver.example.org:8081">https://mysunrayserver.example.org:8081</a></p>
<p>With the user: admin and the password you specified in the installer.</p>
<p>Note: Replace port 8081 with the port you selected in the installer if you did not select 8081.</p>
<p>If you can't log in because the "data store is not responding" proceed to the debugging section.</p>
<ul>
<li>Click "Advanced"</li>
<li>Check all the encryption buttons</li>
<li>Switch soft to hard for client and server</li>
<li>Following instruction to restart client</li>
</ul>
<h2>Debugging</h2>
<p>The following two log files were especially helpful in debugging problems.</p>
<div class="highlight"><pre>tail -f /var/opt/SUNWut/log/messages
tail -f /var/log/autholog
</pre></div>


<h2>Security</h2>
<p>We have the SunRays in there own vlan and only the SunRay servers are allowed to communicate with them. You should also firewall the Web Admin ports in my case port 8080 and 8081.</p>
<h2>Summary</h2>
<p>I havn't had a lot of luck with a consistent installation using the instructions above. If it doesn't work the first time try uninstalling and resintalling the SunRay software. Also I was doing this with SELinux disabled and we already had working SunRays with Solaris 10 so I can't really comment on the dhcp configs or any special network acls we may have in place.</p>                </article>
<p class="paginator">
    Page 1 / 1
</p>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://blkperl.github.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://twitter.com/pdx_blkperl">twitter</a></li>
                            <li><a href="https://github.com/blkperl">github</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>